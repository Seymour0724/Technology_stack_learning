# C语言学习


## Part3-变量和数据类型

### C语言到底使用什么编码
1.对于 char 类型的窄字符，始终使用 ASCII 编码。
2.对于 wchar_t 类型的宽字符和宽字符串，使用 UTF-16 或者 UTF-32 编码，它们都是基于 Unicode 字符集的。
3.对于 char 类型的窄字符串，微软编译器使用本地编码，GCC、LLVM/Clang 使用和源文件编码相同的编码。

另外，处理窄字符和处理宽字符使用的函数也不一样：
* <stdio.h> 头文件中的 putchar、puts、printf 函数只能用来处理窄字符；
* <wchar.h> 头文件中的 putwchar、wprintf 函数只能用来处理宽字符。

### C语言的转义字符
转义字符以\或者\x开头，以\开头表示后跟八进制形式的编码值，以\x开头表示后跟十六进制形式的编码值。对于转义字符来说，只能使用八进制或者十六进制。

\n和\t是最常用的两个转义字符：
\n用来换行，让文本从下一行的开头输出，前面的章节中已经多次使用；
\t用来占位，一般相当于四个空格，或者 tab 键的功能。

* 单引号、双引号、反斜杠是特殊的字符，不能直接表示：
* 单引号是字符类型的开头和结尾，要使用\'表示，也即'\''；
* 双引号是字符串的开头和结尾，要使用\"表示，也即"abc\"123"；
* 反斜杠是转义字符的开头，要使用\\表示，也即'\\'，或者"abc\\123"。

### C语言中的表达式跟语句
（1）表达式（Expression）和语句（Statement）的概念在C语言中并没有明确的定义：
* 表达式可以看做一个计算的公式，往往由数据、变量、运算符等组成，例如3*4+5、a=c=d等，表达式的结果必定是一个值；
* 语句的范围更加广泛，不一定是计算，不一定有值，可以是某个操作、某个函数、选择结构、循环等。

（2）赶紧划重点：
* 表达式必须有一个执行结果，这个结果必须是一个值，例如3*4+5的结果 17，a=c=d=10的结果是 10，printf("hello")的结果是 5（printf 的返回值是成功打印的字符的个数）。
* 以分号;结束的往往称为语句，而不是表达式，例如3*4+5;、a=c=d;等。

### C语言的自增和自减
需要重点说明的是，++ 在变量前面和后面是有区别的：
* ++ 在前面叫做前自增（例如 ++a）。前自增先进行自增运算，再进行其他操作。
* ++ 在后面叫做后自增（例如 a++）。后自增先进行其他操作，再进行自增运算。

### C语言输入字符和字符串（所有函数大汇总）
getche() 就比较有意思了，它没有缓冲区，输入一个字符后会立即读取，不用等待用户按下回车键，这是它和 scanf()、getchar() 的最大区别。请看下面的代码：
**注意，getche() 位于 conio.h 头文件中，而这个头文件是 Windows 特有的，Linux 和 Mac OS 下没有包含该头文件。换句话说，getche() 并不是标准函数，默认只能在 Windows 下使用，不能在 Linux 和 Mac OS 下使用。**

**总结**
* C语言中常用的从控制台读取数据的函数有五个，它们分别是 scanf()、getchar()、getche()、getch() 和 gets()。其中 scanf()、getchar()、gets() 是标准函数，适用于所有平台；getche() 和 getch() 不是标准函数，只能用于 Windows。
* scanf() 是通用的输入函数，它可以读取多种类型的数据。
* getchar()、getche() 和 getch() 是专用的字符输入函数，它们在缓冲区和回显方面与 scanf() 有着不同的特性，是 scanf() 不能替代的。
* gets() 是专用的字符串输入函数，与 scanf() 相比，gets() 的主要优势是可以读取含有空格的字符串。
* scanf() 可以一次性读取多份类型相同或者不同的数据，getchar()、getche()、getch() 和 gets() 每次只能读取一份特定类型的数据，不能一次性读取多份数据。

### 进入缓冲区（缓存）的世界，破解一切与输入输出有关的疑难杂症
**缓冲区其实就是一块内存空间，它用在硬件设备和用户程序之间，用来缓存数据，目的是让快速的 CPU 不必等待慢速的输入输出设备，同时减少操作硬件的次数**

#### 如何清空缓存区
* 使用`getchar()`清空缓存区
    char c;
    while((c = getchar())!'\n'&&c!=EOF);
* `scanf()`高级用法清空缓存区！！！
    scanf("%*[^\n]"); scanf("%*c");

最靠谱、最通用、最有效的清空输入缓冲区的方案就是使用 getchar() 或者 scanf() 将缓冲区中的数据逐个读取出来，其它方案都有或多或少的问题。